<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="noodp">
<meta http-equiv=x-ua-compatible content="IE=edge, chrome=1">
<title>How To Create Maven Dependencies using DSL in Groovy - blog.pavelsklenar.com</title><meta name=description content="Personal blog page"><meta property="og:title" content="How To Create Maven Dependencies using DSL in Groovy">
<meta property="og:description" content="This post shows how to create Maven&rsquo;s dependency elements (used in pom.xml file) programmatically, using DSL (Domain-Specific Language).
You may find it useful, when you need to convert e.g. an old Java project (with dozens of required dependency jar files in one folder) into Maven project, i.e. create a new pom.xml file with all necessary dependency elements.
Of cause, it exists a lot of different ways how to do it, but I solved this task using dynamic nature of Groovy and its metaprogramming capabilities, which makes it attractive for building DSLs.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.pavelsklenar.com/how-to-create-maven-dependencies-using-dsl-in-groovy/"><meta property="og:image" content="https://blog.pavelsklenar.com/logo.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2015-09-04T00:00:00+00:00">
<meta property="article:modified_time" content="2021-09-20T22:40:20+02:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blog.pavelsklenar.com/logo.png">
<meta name=twitter:title content="How To Create Maven Dependencies using DSL in Groovy">
<meta name=twitter:description content="This post shows how to create Maven&rsquo;s dependency elements (used in pom.xml file) programmatically, using DSL (Domain-Specific Language).
You may find it useful, when you need to convert e.g. an old Java project (with dozens of required dependency jar files in one folder) into Maven project, i.e. create a new pom.xml file with all necessary dependency elements.
Of cause, it exists a lot of different ways how to do it, but I solved this task using dynamic nature of Groovy and its metaprogramming capabilities, which makes it attractive for building DSLs.">
<meta name=application-name content="blog.pavelsklenar.com">
<meta name=apple-mobile-web-app-title content="blog.pavelsklenar.com"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.pavelsklenar.com/how-to-create-maven-dependencies-using-dsl-in-groovy/><link rel=prev href=https://blog.pavelsklenar.com/how-to-run-application-in-docker-on-synology/><link rel=next href=https://blog.pavelsklenar.com/make-your-device-public-without-any-public-ipv4/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.623091c4f3b927646c79b3db3772f496ee423628b9567bc0c74af55a4d50d1ba.css integrity="sha256-YjCRxPO5J2RsebPbN3L0lu5CNii5VnvAx0r1Wk1Q0bo="><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"How To Create Maven Dependencies using DSL in Groovy","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.pavelsklenar.com\/how-to-create-maven-dependencies-using-dsl-in-groovy\/"},"image":[{"@type":"ImageObject","url":"https:\/\/blog.pavelsklenar.com\/images\/Apple-Devices-Preview.png","width":3200,"height":2048}],"genre":"posts","wordcount":305,"url":"https:\/\/blog.pavelsklenar.com\/how-to-create-maven-dependencies-using-dsl-in-groovy\/","datePublished":"2015-09-04T00:00:00+00:00","dateModified":"2021-09-20T22:40:20+02:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"Pavel Sklenar","logo":{"@type":"ImageObject","url":"https:\/\/blog.pavelsklenar.com\/images\/avatar.png","width":250,"height":250}},"author":{"@type":"Person","name":"Pavel Sklenar"},"description":""}</script></head>
<body header-desktop=fixed header-mobile=auto><script type=text/javascript>('false'==='true'&&window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script>
<div id=mask></div><div class=wrapper><header class=desktop id=header-desktop>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title=blog.pavelsklenar.com><span class=header-title-pre><i class="fas fa-code-branch fa-fw"></i></span>blog.pavelsklenar.com</a>
</div>
<div class=menu>
<div class=menu-inner><a class=menu-item href=/posts/> Posts </a><a class=menu-item href=/tags/> Tags </a><a class=menu-item href=/categories/> Categories </a><a class=menu-item href=/about/> About </a><a class=menu-item href=https://github.com/pajikos title=GitHub rel="noopener noreferrer" target=_blank><i class="fab fa-github fa-fw"></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-desktop>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a>
</div>
</div>
</div>
</header><header class=mobile id=header-mobile>
<div class=header-container>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title=blog.pavelsklenar.com><span class=header-title-pre><i class="fas fa-code-branch fa-fw"></i></span>blog.pavelsklenar.com</a>
</div>
<div class=menu-toggle id=menu-toggle-mobile>
<span></span><span></span><span></span>
</div>
</div>
<div class=menu id=menu-mobile><div class=search-wrapper>
<div class="search mobile" id=search-mobile>
<input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-mobile>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</div>
<a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>
Cancel
</a>
</div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/about/ title>About</a><a class=menu-item href=https://github.com/pajikos title=GitHub rel="noopener noreferrer" target=_blank><i class="fab fa-github fa-fw"></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a></div>
</div>
</header>
<div class="search-dropdown desktop">
<div id=search-dropdown-desktop></div>
</div>
<div class="search-dropdown mobile">
<div id=search-dropdown-mobile></div>
</div>
<main class=main>
<div class=container><div class=toc id=toc-auto>
<h2 class=toc-title>Contents</h2>
<div class=toc-content id=toc-content-auto></div>
</div><article class="page single"><h1 class="single-title animated flipInX">How To Create Maven Dependencies using DSL in Groovy</h1><div class=post-meta>
<div class=post-meta-line><span class=post-author><a href=/ title=Author rel=" author" class=author><i class="fas fa-user-circle fa-fw"></i>Pavel Sklenar</a></span>&nbsp;<span class=post-category>included in <a href=/categories/groovy/><i class="far fa-folder fa-fw"></i>groovy</a></span></div>
<div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2015-09-04>2015-09-04</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;305 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;2 minutes&nbsp;</div>
</div><div class="details toc" id=toc-static kept>
<div class="details-summary toc-title">
<span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span>
</div>
<div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents></nav></div>
</div><div class=content id=content><p>This post shows how to create Maven&rsquo;s dependency elements (used in  pom.xml file) programmatically, using DSL (Domain-Specific Language).</p>
<p>You may find it useful, when you need to convert e.g. an old Java project (with dozens of required dependency jar files in one folder) into Maven project, i.e. create a new pom.xml file with all necessary dependency elements.</p>
<p>Of cause, it exists a lot of different ways how to do it, but I solved this task using dynamic nature of Groovy and its metaprogramming capabilities, which makes it attractive for building DSLs.</p>
<blockquote>
<p>The basic idea of a domain specific language (DSL) is a computer language that&rsquo;s targeted to a particular kind of problem,&mldr; M. Fowler</p>
</blockquote>
<p>If you are not familiar either with DSL (Domain-Specific Language) or its support in Groovy, learn from the following links:</p>
<ul>
<li><a href=http://martinfowler.com/bliki/DomainSpecificLanguage.html target=_blank rel="noopener noreferrer">DomainSpecificLanguage by Martin Fowler</a></li>
<li><a href=http://docs.groovy-lang.org/docs/latest/html/documentation/core-domain-specific-languages.html target=_blank rel="noopener noreferrer">Domain-Specific Languages - Groovy Doc</a></li>
</ul>
<p>Here is a core of our DSL implementation:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=kt>def</span> <span class=n>xml</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MyDependencyBuilder</span><span class=o>(</span><span class=nl>out:</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>)</span>
 
<span class=c1>//print dependency - using DSL
</span><span class=c1></span><span class=n>xml</span><span class=o>.</span><span class=na>dependency</span> <span class=o>{</span>
    <span class=n>groupId</span> <span class=s2>&#34;org.springframework&#34;</span>
    <span class=n>artifactId</span> <span class=s2>&#34;spring-core&#34;</span>
    <span class=n>version</span> <span class=s2>&#34;4.2.1.RELEASE&#34;</span>
<span class=o>}</span>
</code></pre></div><p>The core class consist of one variable to output a result (<code>def out</code>) and a <code>methodMissing</code> implementation. Customizing the behavior of <code>methodMissing</code> (and <code>propertyMissing</code> in addition) is the heart of Groovy runtime metaprogramming, so we can create methods on the fly.</p>
<p>Every time you call any missing method, the runtime of Groovy routes the call to our <code>methodMissing</code>, just before throwing a <code>MissingMethodException</code> exception.</p>
<p>In a case of <code>Closure</code> params (line 5), we need to delegate all its calls back, to our <code>methodMissing</code> method using a change in Closure&rsquo;s <a href=http://docs.groovy-lang.org/docs/latest/html/documentation/core-domain-specific-languages.html#_delegating_to_an_arbitrary_type target=_blank rel="noopener noreferrer">delegate property</a>.</p>
<p>Here is an example of usage of this class:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=kt>def</span> <span class=n>xml</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MyDependencyBuilder</span><span class=o>(</span><span class=nl>out:</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>)</span>
 
<span class=c1>//print dependency - using DSL
</span><span class=c1></span><span class=n>xml</span><span class=o>.</span><span class=na>dependency</span> <span class=o>{</span>
    <span class=n>groupId</span> <span class=s2>&#34;org.springframework&#34;</span>
    <span class=n>artifactId</span> <span class=s2>&#34;spring-core&#34;</span>
    <span class=n>version</span> <span class=s2>&#34;4.2.1.RELEASE&#34;</span>
<span class=o>}</span>
</code></pre></div><p>All of the above should print something like this (without whitespaces):</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;dependency&gt;</span>
    <span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
    <span class=nt>&lt;artifactId&gt;</span>spring-core<span class=nt>&lt;/artifactId&gt;</span>
    <span class=nt>&lt;version&gt;</span>4.2.1.RELEASE<span class=nt>&lt;/version&gt;</span>
<span class=nt>&lt;/dependency&gt;</span>
</code></pre></div></div><div class=post-footer id=post-footer>
<div class=post-info>
<div class=post-info-line>
<div class=post-info-mod>
<span>Updated on 2021-09-20&nbsp;<a class=git-hash href=https://github.com/pajikos/pajikos.github.io/commit/f5d3ae45f5183f44c2c5404fa2bb327ad1e0ed43 target=_blank rel="noopener noreferrer" title="commit by Pavel Sklenar(pavel.sklenar@cloudfield.cz) f5d3ae45f5183f44c2c5404fa2bb327ad1e0ed43: Initial migration commit">
<i class="fas fa-hashtag fa-fw"></i>f5d3ae4</a></span>
</div>
<div class=post-info-license></div>
</div>
<div class=post-info-line>
<div class=post-info-md><span>
<a class=link-to-markdown href=/how-to-create-maven-dependencies-using-dsl-in-groovy/index.md target=_blank rel="noopener noreferrer">Read Markdown</a>
</span></div>
<div class=post-info-share>
<span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://blog.pavelsklenar.com/how-to-create-maven-dependencies-using-dsl-in-groovy/ data-title="How To Create Maven Dependencies using DSL in Groovy"><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://blog.pavelsklenar.com/how-to-create-maven-dependencies-using-dsl-in-groovy/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://blog.pavelsklenar.com/how-to-create-maven-dependencies-using-dsl-in-groovy/ data-title="How To Create Maven Dependencies using DSL in Groovy" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://blog.pavelsklenar.com/how-to-create-maven-dependencies-using-dsl-in-groovy/ data-title="How To Create Maven Dependencies using DSL in Groovy"><i class="fab fa-hacker-news fa-fw"></i></a><a href=javascript:void(0); title="Share on Pocket" data-sharer=pocket data-url=https://blog.pavelsklenar.com/how-to-create-maven-dependencies-using-dsl-in-groovy/><i class="fab fa-get-pocket fa-fw"></i></a><a href=javascript:void(0); title="Share on Evernote" data-sharer=evernote data-url=https://blog.pavelsklenar.com/how-to-create-maven-dependencies-using-dsl-in-groovy/ data-title="How To Create Maven Dependencies using DSL in Groovy"><i class="fab fa-evernote fa-fw"></i></a></span>
</div>
</div>
</div>
<div class=post-info-more>
<section class=post-tags></section>
<section>
<span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span>
</section>
</div>
<div class=post-nav><a href=/how-to-run-application-in-docker-on-synology/ class=prev rel=prev title="How to Run Application in Docker on Synology"><i class="fas fa-angle-left fa-fw"></i>How to Run Application in Docker on Synology</a>
<a href=/make-your-device-public-without-any-public-ipv4/ class=next rel=next title="Make Your Device Public Without Any Public IPv4">Make Your Device Public Without Any Public IPv4<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id=comments><div id=disqus_thread class=comment></div><noscript>
Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.
</noscript></div></article></div>
</main><footer class=footer>
<div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2015 - 2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer">Pavel Sklenar</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div>
</div>
</footer></div>
<div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top">
<i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments">
<i class="fas fa-comment fa-fw"></i>
</a>
</div><script type=text/javascript src=https://pavelsklenar.disqus.com/embed.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.2.0/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:70},comment:{},search:{algoliaAppID:"FCUIGZY2I2",algoliaIndex:"index.en",algoliaSearchKey:"c8c5599716aec462e125eea72ac52f41",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.47a1ff73dc443ed4a9f13e3134f6058e8c6d21248b35d03e7d64f56345190c3e.js integrity="sha256-R6H/c9xEPtSp8T4xNPYFjoxtISSLNdA+fWT1Y0UZDD4="></script></body>
</html>